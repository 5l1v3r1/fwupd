From 34f8e1507db437c033e4ed5c3ccd9d420120ea38 Mon Sep 17 00:00:00 2001
From: Richard Hughes <richard@hughsie.com>
Date: Fri, 1 Feb 2019 16:47:03 +0000
Subject: [PATCH] trivial: Fix potential compile failures for high -j values

---
 plugins/ata/meson.build          | 1 +
 plugins/dell/meson.build         | 1 +
 plugins/dfu/meson.build          | 2 ++
 plugins/nitrokey/meson.build     | 1 +
 plugins/nvme/meson.build         | 1 +
 plugins/redfish/meson.build      | 1 +
 plugins/synapticsmst/meson.build | 1 +
 plugins/thunderbolt/meson.build  | 2 ++
 plugins/udev/meson.build         | 1 +
 plugins/uefi/meson.build         | 1 +
 plugins/unifying/meson.build     | 1 +
 plugins/wacom-usb/meson.build    | 1 +
 12 files changed, 14 insertions(+)

diff --git a/plugins/ata/meson.build b/plugins/ata/meson.build
index cd26e39..7171e6b 100644
--- a/plugins/ata/meson.build
+++ b/plugins/ata/meson.build
@@ -36,6 +36,7 @@ if get_option('tests')
   cargs += '-DTESTDATADIR="' + testdatadir + '"'
   e = executable(
     'ata-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'fu-ata-device.c',
diff --git a/plugins/dell/meson.build b/plugins/dell/meson.build
index df96b97..2c0532f 100644
--- a/plugins/dell/meson.build
+++ b/plugins/dell/meson.build
@@ -37,6 +37,7 @@ if get_option('tests')
   cargs += '-DPLUGINBUILDDIR="' + meson.current_build_dir() + '"'
   e = executable(
     'dell-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'fu-dell-smi.c',
diff --git a/plugins/dfu/meson.build b/plugins/dfu/meson.build
index f9d9632..fc517fc 100644
--- a/plugins/dfu/meson.build
+++ b/plugins/dfu/meson.build
@@ -6,6 +6,7 @@ install_data(['dfu.quirk'],
 
 dfu = static_library(
   'dfu',
+  fu_hash,
   sources : [
     'dfu-cipher-xtea.c',
     'dfu-common.c',
@@ -117,6 +118,7 @@ if get_option('tests')
   cargs += '-DTESTDATADIR="' + testdatadir + '"'
   e = executable(
     'dfu-self-test',
+    fu_hash,
     sources : [
       'dfu-self-test.c'
     ],
diff --git a/plugins/nitrokey/meson.build b/plugins/nitrokey/meson.build
index 4691149..225b49b 100644
--- a/plugins/nitrokey/meson.build
+++ b/plugins/nitrokey/meson.build
@@ -30,6 +30,7 @@ shared_module('fu_plugin_nitrokey',
 if get_option('tests')
   e = executable(
     'nitrokey-self-test',
+    fu_hash,
     sources : [
       'fu-nitrokey-common.c',
       'fu-self-test.c',
diff --git a/plugins/nvme/meson.build b/plugins/nvme/meson.build
index 614ccc6..5ec0a86 100644
--- a/plugins/nvme/meson.build
+++ b/plugins/nvme/meson.build
@@ -38,6 +38,7 @@ if get_option('tests')
   cargs += '-DTESTDATADIR="' + testdatadir + '"'
   e = executable(
     'nvme-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'fu-nvme-common.c',
diff --git a/plugins/redfish/meson.build b/plugins/redfish/meson.build
index a4cdba5..5c88504 100644
--- a/plugins/redfish/meson.build
+++ b/plugins/redfish/meson.build
@@ -32,6 +32,7 @@ install_data(['redfish.conf'],
 if get_option('tests')
   e = executable(
     'redfish-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'fu-redfish-client.c',
diff --git a/plugins/synapticsmst/meson.build b/plugins/synapticsmst/meson.build
index 0f1abdb..046ac6e 100644
--- a/plugins/synapticsmst/meson.build
+++ b/plugins/synapticsmst/meson.build
@@ -35,6 +35,7 @@ if get_option('tests')
   cargs += '-DSOURCEDIR="' + meson.current_source_dir() + '"'
   e = executable(
     'synapticsmst-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'synapticsmst-common.c',
diff --git a/plugins/thunderbolt/meson.build b/plugins/thunderbolt/meson.build
index 10991e5..c15e4d8 100644
--- a/plugins/thunderbolt/meson.build
+++ b/plugins/thunderbolt/meson.build
@@ -26,6 +26,7 @@ testdatadir_src = join_paths(meson.source_root(), 'data', 'tests')
 testdatadir_dst = join_paths(meson.build_root(), 'data', 'tests')
 cargs += '-DTESTDATADIR="' + testdatadir_src + ':' + testdatadir_dst + '"'
 executable('tbtfwucli',
+  fu_hash,
   sources : [
     'fu-thunderbolt-tool.c',
   ],
@@ -50,6 +51,7 @@ if get_option('tests') and umockdev.found() and gio.version().version_compare('>
   cargs += '-DPLUGINBUILDDIR="' + meson.current_build_dir() + '"'
   e = executable(
     'thunderbolt-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'fu-plugin-thunderbolt.c',
diff --git a/plugins/udev/meson.build b/plugins/udev/meson.build
index 334b14a..dfc05de 100644
--- a/plugins/udev/meson.build
+++ b/plugins/udev/meson.build
@@ -50,6 +50,7 @@ if get_option('tests')
   cargs += '-DTESTDATADIR="' + testdatadir + '"'
   e = executable(
     'udev-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'fu-rom.c',
diff --git a/plugins/uefi/meson.build b/plugins/uefi/meson.build
index 2492e4e..fd1b397 100644
--- a/plugins/uefi/meson.build
+++ b/plugins/uefi/meson.build
@@ -83,6 +83,7 @@ if get_option('tests')
   cargs += '-DTESTDATADIR="' + testdatadir + '"'
   e = executable(
     'uefi-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'fu-uefi-bgrt.c',
diff --git a/plugins/unifying/meson.build b/plugins/unifying/meson.build
index 7e04912..f90d1fb 100644
--- a/plugins/unifying/meson.build
+++ b/plugins/unifying/meson.build
@@ -39,6 +39,7 @@ shared_module('fu_plugin_unifying',
 if get_option('tests')
   e = executable(
     'unifying-self-test',
+    fu_hash,
     sources : [
       'fu-unifying-self-test.c',
       'fu-unifying-common.c',
diff --git a/plugins/wacom-usb/meson.build b/plugins/wacom-usb/meson.build
index e2a3f37..fd92ed4 100644
--- a/plugins/wacom-usb/meson.build
+++ b/plugins/wacom-usb/meson.build
@@ -38,6 +38,7 @@ if get_option('tests')
   cargs += '-DTESTDATADIR="' + testdatadir + '"'
   e = executable(
     'wacom-usb-self-test',
+    fu_hash,
     sources : [
       'fu-self-test.c',
       'fu-wac-common.c',
-- 
2.7.4

