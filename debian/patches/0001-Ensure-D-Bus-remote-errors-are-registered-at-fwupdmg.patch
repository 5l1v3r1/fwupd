From 697eb603208734296afa7d9c86e84259a82b56d3 Mon Sep 17 00:00:00 2001
From: Richard Hughes <richard@hughsie.com>
Date: Wed, 23 Sep 2015 10:04:17 +0100
Subject: [PATCH] Ensure D-Bus remote errors are registered at fwupdmgr startup

Fixes: https://github.com/hughsie/fwupd/issues/31
---
 src/fu-util.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/fu-util.c b/src/fu-util.c
index 71c3cbb..ecfac4a 100644
--- a/src/fu-util.c
+++ b/src/fu-util.c
@@ -1468,6 +1468,9 @@ main (int argc, char *argv[])
 	bind_textdomain_codeset (GETTEXT_PACKAGE, "UTF-8");
 	textdomain (GETTEXT_PACKAGE);
 
+	/* ensure D-Bus errors are registered */
+	fwupd_error_quark ();
+
 	/* create helper object */
 	priv = g_new0 (FuUtilPrivate, 1);
 	priv->loop = g_main_loop_new (NULL, FALSE);
-- 
1.9.1

